
int ledpin_red=D0;
int ledpin_yellow=D1;
int ledpin_green=D2;
int inpin=D3;
volatile int flag=0;
volatile int check=1;
void setup()
{
  pinMode(ledpin_red,OUTPUT);
  pinMode(ledpin_yellow,OUTPUT);
  pinMode(ledpin_green,OUTPUT);
  attachInterrupt(inpin, traffLight, FALLING);

}

void loop()
{

}
void traffLight()
{
  if(flag==0)
  {
    if (check==1)
    {
      digitalWrite(ledpin_red, HIGH);
      flag=1;
    }
    else
    {
      digitalWrite(ledpin_red, LOW);
    }
    if(check==2)
    {
      flag=1;
      digitalWrite(ledpin_yellow, HIGH);
    } 
    else
  {
    digitalWrite(ledpin_yellow, LOW);
  }
    if(check==3)
  {
    digitalWrite(ledpin_green, HIGH);
    flag=1;
    check=0;
  }
    else
  {
    digitalWrite(ledpin_green, LOW);
  }

  }
  if(flag==1)
  {
    check=check+1;
    flag=0;
  }
}
