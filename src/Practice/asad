
volatile int isButtonPressed = 0;
volatile int changeColor = 1;

void setup() {
  // put your setup code here, to run once:
  pinMode(D0,  OUTPUT);
  pinMode(D1,  OUTPUT);
  pinMode(D2,  OUTPUT);
  attachInterrupt(D3, trafficLight, FALLING);

}

void loop()
{

}
void trafficLight() {
  if(changeColor == 1)
  {
    digitalWrite(D0, HIGH);
    isButtonPressed = 1;
  }
  else{digitalWrite(D0, LOW);}

  if(changeColor == 2)
  {
    digitalWrite(D1, HIGH);
    isButtonPressed = 1;
  }
  else{digitalWrite(D1, LOW);}

  if(changeColor == 3)
  {
    digitalWrite(D2, HIGH);
    isButtonPressed = 1;
    changeColor = 0;
  }
  else{digitalWrite(D2, LOW);}

  if((digitalRead(D0) == LOW) && isButtonPressed == 1)
  {
    changeColor += 1;
    isButtonPressed = 0;
  }
}
